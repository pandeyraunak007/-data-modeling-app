<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erwin Cloud DM - Data Modeler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .primary-tab.active {
            background: white;
            border-bottom: 3px solid #6366f1;
            color: #6366f1;
        }
        .ribbon-option {
            min-width: 45px;
            text-align: center;
        }
        .entity-box {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            min-width: 180px;
            cursor: move;
            position: absolute;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .entity-box:hover {
            border-color: #6366f1;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }
        .entity-box.selected {
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        .canvas {
            background-image: radial-gradient(circle, #e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .docked-toolbar {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: absolute;
            z-index: 100;
            width: 48px;
            user-select: none;
            cursor: move;
        }
        .contextual-toolbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            position: absolute;
            z-index: 200;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.2s ease;
            pointer-events: none;
        }
        .contextual-toolbar.show {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
        .toolbar-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .toolbar-icon:hover {
            background: #f3f4f6;
            transform: scale(1.1);
        }
        .toolbar-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 4px 8px;
        }
        .tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .tree-item {
            font-size: 13px;
            padding: 2px 8px;
            border-radius: 4px;
        }
        .tree-item:hover {
            background: #f3f4f6;
        }
        .tree-item.selected {
            background: #e0e7ff;
            color: #3730a3;
        }
        .extreme-left-nav {
            width: 60px;
            background: #f9fafb;
        }
        .model-explorer {
            width: 280px;
            background: #f9fafb;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans overflow-hidden">
    <!-- Row 1: Header (7% height) -->
    <header class="h-[7vh] bg-white border-b border-gray-200 flex items-center px-6">
        <!-- Left Section -->
        <div class="flex items-center space-x-6">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                    <span class="text-white font-bold text-sm">E</span>
                </div>
                <span class="text-lg font-semibold text-gray-900">Erwin Cloud DM</span>
            </div>

            <!-- Breadcrumb -->
            <nav class="flex items-center text-sm text-gray-600">
                <span>E-commerce Project</span>
                <span class="mx-2">›</span>
                <span>Customer Model</span>
                <span class="mx-2">›</span>
                <span class="text-indigo-600 font-medium">Main Diagram</span>
            </nav>
        </div>

        <!-- Center Section -->
        <div class="flex-1 flex justify-center">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-600">View:</span>
                    <button class="px-3 py-1 bg-indigo-600 text-white text-sm rounded">Logical</button>
                    <button class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded">Physical</button>
                </div>
                <div class="h-4 w-px bg-gray-300"></div>
                <div class="flex items-center space-x-2">
                    <span class="material-symbols-outlined text-sm text-gray-600">storage</span>
                    <span class="text-sm text-gray-700">MS Fabric</span>
                </div>
            </div>
        </div>

        <!-- Right Section -->
        <div class="flex items-center space-x-4">
            <button class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg">
                <span class="material-symbols-outlined">help</span>
            </button>
            <button class="relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg">
                <span class="material-symbols-outlined">notifications</span>
                <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">2</span>
            </button>
            <div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                RP
            </div>
        </div>
    </header>

    <!-- Row 2: Primary Tabs (6% height) -->
    <div class="h-[6vh] bg-gray-100 border-b border-gray-200 flex items-end">
        <div class="flex">
            <button onclick="switchTab('file')" class="primary-tab active px-4 py-2 text-xs font-medium rounded-t-lg flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">folder</span>
                <span>File</span>
            </button>
            <button onclick="switchTab('home')" class="primary-tab px-4 py-2 text-xs font-medium rounded-t-lg text-gray-600 hover:text-gray-900 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">home</span>
                <span>Home</span>
            </button>
            <button onclick="switchTab('diagram')" class="primary-tab px-4 py-2 text-xs font-medium rounded-t-lg text-gray-600 hover:text-gray-900 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">schema</span>
                <span>Diagram</span>
            </button>
            <button onclick="switchTab('view')" class="primary-tab px-4 py-2 text-xs font-medium rounded-t-lg text-gray-600 hover:text-gray-900 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">visibility</span>
                <span>View</span>
            </button>
            <button onclick="switchTab('tools')" class="primary-tab px-4 py-2 text-xs font-medium rounded-t-lg text-gray-600 hover:text-gray-900 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">build</span>
                <span>Tools</span>
            </button>
            <button onclick="switchTab('help')" class="primary-tab px-4 py-2 text-xs font-medium rounded-t-lg text-gray-600 hover:text-gray-900 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">help</span>
                <span>Help</span>
            </button>
        </div>
    </div>

    <!-- Row 3: Secondary Ribbon (6% height) -->
    <div class="h-[6vh] bg-white border-b border-gray-200 px-6 py-2">
        <!-- File Ribbon -->
        <div id="ribbon-file" class="ribbon-content flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">add</span>
                    <span class="text-[10px]">New</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">folder_open</span>
                    <span class="text-[10px]">Open</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">save</span>
                    <span class="text-[10px]">Save</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">save_as</span>
                    <span class="text-[10px]">Save As</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">upload</span>
                    <span class="text-[10px]">Import</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">download</span>
                    <span class="text-[10px]">Export</span>
                </button>
            </div>
        </div>

        <!-- Home Ribbon -->
        <div id="ribbon-home" class="ribbon-content hidden flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">table_chart</span>
                    <span class="text-[10px]">Add Entity</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">share</span>
                    <span class="text-[10px]">Identifying</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">link</span>
                    <span class="text-[10px]">Non-Identify</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">device_hub</span>
                    <span class="text-[10px]">Many-Many</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">hierarchy</span>
                    <span class="text-[10px]">Supertype</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">note_add</span>
                    <span class="text-[10px]">Annotation</span>
                </button>
            </div>
        </div>

        <!-- Diagram Ribbon -->
        <div id="ribbon-diagram" class="ribbon-content hidden flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">auto_awesome</span>
                    <span class="text-[10px]">Auto Layout</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">account_tree</span>
                    <span class="text-[10px]">Hierarchical</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">radio_button_unchecked</span>
                    <span class="text-[10px]">Circular</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">format_align_left</span>
                    <span class="text-[10px]">Align Left</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">format_align_center</span>
                    <span class="text-[10px]">Center</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">format_align_right</span>
                    <span class="text-[10px]">Align Right</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">zoom_in</span>
                    <span class="text-[10px]">Zoom In</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">zoom_out</span>
                    <span class="text-[10px]">Zoom Out</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">fit_screen</span>
                    <span class="text-[10px]">Fit</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">grid_on</span>
                    <span class="text-[10px]">Grid</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">straighten</span>
                    <span class="text-[10px]">Snap</span>
                </button>
            </div>
        </div>

        <!-- View Ribbon -->
        <div id="ribbon-view" class="ribbon-content hidden flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">visibility</span>
                    <span class="text-[10px]">Attributes</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">key</span>
                    <span class="text-[10px]">Keys Only</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">abc</span>
                    <span class="text-[10px]">Logical</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">storage</span>
                    <span class="text-[10px]">Physical</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">category</span>
                    <span class="text-[10px]">Subject Areas</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">schema</span>
                    <span class="text-[10px]">Complete</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">layers</span>
                    <span class="text-[10px]">Partial</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">link</span>
                    <span class="text-[10px]">Relations</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">numbers</span>
                    <span class="text-[10px]">Cardinality</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">label</span>
                    <span class="text-[10px]">Role Names</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">palette</span>
                    <span class="text-[10px]">Colors</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">text_fields</span>
                    <span class="text-[10px]">Notation</span>
                </button>
            </div>
        </div>

        <!-- Tools Ribbon -->
        <div id="ribbon-tools" class="ribbon-content hidden flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">fact_check</span>
                    <span class="text-[10px]">Validate</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">rule</span>
                    <span class="text-[10px]">Check</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">error</span>
                    <span class="text-[10px]">Find Errors</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <div class="relative">
                    <button onclick="toggleCompareMenu()" class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded" id="compareMenuButton">
                        <span class="material-symbols-outlined text-sm">compare</span>
                        <span class="text-[10px]">Compare</span>
                    </button>
                    <!-- Compare Submenu -->
                    <div id="compareSubmenu" class="absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 hidden min-w-32">
                        <button onclick="quickCompare()" class="w-full px-3 py-2 text-xs text-left hover:bg-gray-100 flex items-center">
                            <span class="material-symbols-outlined text-sm mr-2">compare</span>
                            Quick Compare
                        </button>
                        <button onclick="toggleCompleteCompare()" class="w-full px-3 py-2 text-xs text-left hover:bg-gray-100 flex items-center" id="toolsCompleteCompare">
                            <span class="material-symbols-outlined text-sm mr-2">compare_arrows</span>
                            Complete Compare
                        </button>
                    </div>
                </div>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">merge</span>
                    <span class="text-[10px]">Merge</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">code</span>
                    <span class="text-[10px]">Generate DDL</span>
                </button>
                <button onclick="toggleReverseEngineering()" class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded" id="toolsRibbonRE">
                    <span class="material-symbols-outlined text-sm">upload_file</span>
                    <span class="text-[10px]">Reverse Eng</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">description</span>
                    <span class="text-[10px]">Reports</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">badge</span>
                    <span class="text-[10px]">Naming</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">play_arrow</span>
                    <span class="text-[10px]">Run Macro</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">terminal</span>
                    <span class="text-[10px]">Script</span>
                </button>
            </div>
        </div>

        <!-- Help Ribbon -->
        <div id="ribbon-help" class="ribbon-content hidden flex items-center space-x-4 h-full">
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">menu_book</span>
                    <span class="text-[10px]">User Guide</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">school</span>
                    <span class="text-[10px]">Tutorials</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">keyboard</span>
                    <span class="text-[10px]">Shortcuts</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">support_agent</span>
                    <span class="text-[10px]">Support</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">bug_report</span>
                    <span class="text-[10px]">Report Bug</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">update</span>
                    <span class="text-[10px]">Updates</span>
                </button>
            </div>
            <div class="h-8 w-px bg-gray-300"></div>
            <div class="flex items-center space-x-2">
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">info</span>
                    <span class="text-[10px]">About</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">assignment</span>
                    <span class="text-[10px]">License</span>
                </button>
                <button class="ribbon-option flex flex-col items-center p-0.5 hover:bg-gray-100 rounded">
                    <span class="material-symbols-outlined text-sm">new_releases</span>
                    <span class="text-[10px]">Release Notes</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Row 4: Main Workspace (81% height) -->
    <div class="h-[81vh] flex">
        <!-- Column 1: Left Navigation (20% width) -->
        <div class="w-[20%] flex">
            <!-- Extreme Left Vertical Menu -->
            <div class="extreme-left-nav flex flex-col items-center py-4 space-y-4">
                <a href="index.html" class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                </a>
                <button class="p-3 text-indigo-600 bg-indigo-100 rounded-lg" title="Data Modeler">
                    <span class="material-symbols-outlined">table_chart</span>
                </button>
                <button class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Import/Export">
                    <span class="material-symbols-outlined">cloud_download</span>
                </button>
                <button onclick="toggleReverseEngineering()" class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Reverse Engineering" id="mainMenuRE">
                    <span class="material-symbols-outlined">upload_file</span>
                </button>
                <button onclick="toggleCompleteCompare()" class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Complete Compare" id="mainMenuCompare">
                    <span class="material-symbols-outlined">compare_arrows</span>
                </button>
                <a href="users.html" class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Users">
                    <span class="material-symbols-outlined">group</span>
                </a>
                <a href="settings.html" class="p-3 text-gray-600 hover:text-indigo-600 hover:bg-gray-200 rounded-lg" title="Settings">
                    <span class="material-symbols-outlined">settings</span>
                </a>
            </div>

            <!-- Model Explorer -->
            <div class="model-explorer border-r border-gray-200 flex flex-col">
                <div class="p-3 border-b border-gray-200 bg-white">
                    <div class="flex items-center justify-between">
                        <h3 class="text-sm font-semibold text-gray-900">Model Explorer</h3>
                        <button class="text-gray-400 hover:text-gray-600">
                            <span class="material-symbols-outlined text-sm">collapse_content</span>
                        </button>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-2">
                    <div class="space-y-1">
                        <!-- Model Root -->
                        <div class="tree-item flex items-center">
                            <span class="material-symbols-outlined text-sm mr-2">folder</span>
                            <span class="font-medium">E-commerce Model</span>
                            <button class="ml-auto text-gray-400 hover:text-gray-600">
                                <span class="material-symbols-outlined text-xs">more_vert</span>
                            </button>
                        </div>

                        <!-- Diagrams -->
                        <div class="ml-4">
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">expand_more</span>
                                <span class="material-symbols-outlined text-sm mr-2">schema</span>
                                <span>Diagrams (2)</span>
                            </div>
                            <div class="ml-6 space-y-1">
                                <div class="tree-item selected flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">article</span>
                                    <span>Main Diagram</span>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">article</span>
                                    <span>User Management</span>
                                </div>
                            </div>
                        </div>

                        <!-- Entities -->
                        <div class="ml-4">
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">expand_more</span>
                                <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                <span>Entities (5)</span>
                            </div>
                            <div class="ml-6 space-y-1">
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                    <span>Customer</span>
                                    <button class="ml-auto text-gray-400 hover:text-gray-600">
                                        <span class="material-symbols-outlined text-xs">more_vert</span>
                                    </button>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                    <span>Order</span>
                                    <button class="ml-auto text-gray-400 hover:text-gray-600">
                                        <span class="material-symbols-outlined text-xs">more_vert</span>
                                    </button>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                    <span>Product</span>
                                    <button class="ml-auto text-gray-400 hover:text-gray-600">
                                        <span class="material-symbols-outlined text-xs">more_vert</span>
                                    </button>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                    <span>OrderItem</span>
                                    <button class="ml-auto text-gray-400 hover:text-gray-600">
                                        <span class="material-symbols-outlined text-xs">more_vert</span>
                                    </button>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                    <span>Category</span>
                                    <button class="ml-auto text-gray-400 hover:text-gray-600">
                                        <span class="material-symbols-outlined text-xs">more_vert</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Relationships -->
                        <div class="ml-4">
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">expand_more</span>
                                <span class="material-symbols-outlined text-sm mr-2">share</span>
                                <span>Relationships (4)</span>
                            </div>
                            <div class="ml-6 space-y-1">
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">share</span>
                                    <span>Customer-Order</span>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">share</span>
                                    <span>Order-OrderItem</span>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">share</span>
                                    <span>Product-OrderItem</span>
                                </div>
                                <div class="tree-item flex items-center">
                                    <span class="material-symbols-outlined text-sm mr-2">share</span>
                                    <span>Category-Product</span>
                                </div>
                            </div>
                        </div>

                        <!-- Other sections collapsed -->
                        <div class="ml-4 space-y-1">
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">chevron_right</span>
                                <span class="material-symbols-outlined text-sm mr-2">key</span>
                                <span>Keys</span>
                            </div>
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">chevron_right</span>
                                <span class="material-symbols-outlined text-sm mr-2">visibility</span>
                                <span>Views</span>
                            </div>
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">chevron_right</span>
                                <span class="material-symbols-outlined text-sm mr-2">data_object</span>
                                <span>Domains</span>
                            </div>
                            <div class="tree-item flex items-center">
                                <span class="material-symbols-outlined text-sm mr-2">chevron_right</span>
                                <span class="material-symbols-outlined text-sm mr-2">rule</span>
                                <span>Business Rules</span>
                            </div>
                        </div>

                        <!-- Complete Compare (Navigation Entry Point) -->
                        <div class="mt-4 border-t border-gray-200 pt-2">
                            <div class="tree-item flex items-center cursor-pointer hover:bg-gray-100 rounded p-2" onclick="startCompleteCompare()">
                                <span class="material-symbols-outlined text-sm mr-2 text-blue-600">compare_arrows</span>
                                <span class="font-medium text-blue-600">Complete Compare</span>
                                <span class="ml-auto text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Tool</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Complete Compare Workflow (Columns 3 & 4 Combined - 80% width) -->
        <div class="w-[80%] flex flex-col" id="compareColumn">
            <!-- Original Diagram Elements (Hidden in Compare Mode) -->
            <div id="originalDiagramElements" class="hidden">
            <div class="bg-gray-100 border-b border-gray-200 px-4 py-2" id="modelTabs">
                <div class="flex space-x-1">
                    <button class="px-4 py-1 bg-white border border-gray-300 rounded-t text-sm font-medium">E-commerce Model</button>
                    <button class="px-4 py-1 text-gray-600 hover:bg-gray-200 rounded-t text-sm">+ New Model</button>
                </div>
            </div>

            </div>

            <!-- Complete Compare Interface -->
            <div id="compareInterface" class="flex-1 flex flex-col">
                <!-- Step 1: Model Selection -->
                <div id="compareStep1" class="flex-1 flex flex-col">
                    <!-- Header -->
                    <div class="bg-white border-b border-gray-200 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-900">Complete Compare</h2>
                                <p class="text-sm text-gray-600">Select two models to compare and analyze differences</p>
                            </div>
                            <button onclick="exitCompareMode()" class="text-gray-400 hover:text-gray-600">
                                <span class="material-symbols-outlined">close</span>
                            </button>
                        </div>
                    </div>

                    <!-- Model Selection Content -->
                    <div class="flex-1 p-6 bg-gray-50">
                        <div class="max-w-4xl mx-auto">
                            <!-- Step Indicator -->
                            <div class="mb-8">
                                <div class="flex items-center justify-center space-x-4">
                                    <div class="flex items-center">
                                        <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium">1</div>
                                        <span class="ml-2 text-sm font-medium text-blue-600">Select Models</span>
                                    </div>
                                    <div class="w-16 h-px bg-gray-300"></div>
                                    <div class="flex items-center">
                                        <div class="w-8 h-8 bg-gray-300 text-gray-500 rounded-full flex items-center justify-center text-sm font-medium">2</div>
                                        <span class="ml-2 text-sm text-gray-500">Compare</span>
                                    </div>
                                    <div class="w-16 h-px bg-gray-300"></div>
                                    <div class="flex items-center">
                                        <div class="w-8 h-8 bg-gray-300 text-gray-500 rounded-full flex items-center justify-center text-sm font-medium">3</div>
                                        <span class="ml-2 text-sm text-gray-500">Resolve</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex justify-center space-x-4">
                                <button onclick="exitCompareMode()" class="px-6 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button onclick="startComparison()" class="px-6 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                                    Start Comparison
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Comparison View (Hidden initially) -->
                <div id="compareStep2" class="flex-1 flex flex-col hidden">
                    <!-- Header with Filters -->
                    <div class="bg-white border-b border-gray-200 px-6 py-4">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-900">Model Comparison</h2>
                                <p class="text-sm text-gray-600">CustomerDB_v1.2 vs CustomerDB_v1.3</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button onclick="exportComparisonReport()" class="px-4 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50">
                                    Export Report
                                </button>
                                <button onclick="goToStep(1)" class="text-gray-400 hover:text-gray-600">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                        </div>

                        <!-- Quick Filters -->
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-medium text-gray-700">Show:</span>
                                <button onclick="filterComparison('all')" class="px-3 py-1 bg-blue-600 text-white rounded text-sm">All</button>
                                <button onclick="filterComparison('conflicts')" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Conflicts Only</button>
                                <button onclick="filterComparison('differences')" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Differences Only</button>
                            </div>
                            <div class="w-px h-6 bg-gray-300"></div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-medium text-gray-700">Type:</span>
                                <select class="px-2 py-1 border border-gray-300 rounded text-sm">
                                    <option>All Objects</option>
                                    <option>Tables</option>
                                    <option>Views</option>
                                    <option>Relationships</option>
                                    <option>Indexes</option>
                                    <option>Constraints</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 3-Column Comparison Layout -->
                    <div class="flex-1 flex">
                        <!-- Left Model Tree -->
                        <div class="w-1/2 bg-white border-r border-gray-200 flex flex-col">
                            <div class="px-4 py-3 bg-blue-50 border-b border-gray-200">
                                <h3 class="font-semibold text-blue-800">Left Model (v1.2)</h3>
                                <p class="text-xs text-blue-600">5 entities, 18 objects total</p>
                            </div>
                            <div class="flex-1 overflow-y-auto p-3" id="leftModelTree">
                                <!-- Will be populated with model tree -->
                            </div>
                        </div>

                        <!-- Right Model Tree -->
                        <div class="w-1/2 bg-white flex flex-col">
                            <div class="px-4 py-3 bg-green-50 border-b border-gray-200">
                                <h3 class="font-semibold text-green-800">Right Model (v1.3)</h3>
                                <p class="text-xs text-green-600">6 entities, 24 objects total</p>
                            </div>
                            <div class="flex-1 overflow-y-auto p-3" id="rightModelTree">
                                <!-- Will be populated with model tree -->
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Properties Panel -->
                    <div id="comparisonPropertiesPanel" class="h-64 bg-white border-t border-gray-200 flex flex-col">
                        <div class="px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between">
                            <h3 class="font-semibold text-gray-900">Object Details</h3>
                            <button onclick="togglePropertiesPanel()" class="text-gray-400 hover:text-gray-600">
                                <span class="material-symbols-outlined">expand_more</span>
                            </button>
                        </div>
                        <div class="flex-1 overflow-y-auto p-4" id="objectDetailsContent">
                            <div class="text-center text-gray-500 py-8">
                                <span class="material-symbols-outlined text-4xl mb-2 block">info</span>
                                <p>Select an object to view detailed comparison</p>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="bg-white border-t border-gray-200 px-6 py-4 flex justify-between">
                        <button onclick="goToStep(1)" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            ← Back to Model Selection
                        </button>
                        <button onclick="goToStep(3)" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                            Resolve Conflicts →
                        </button>
                    </div>
                </div>

                <!-- Step 3: Conflict Resolution (Hidden initially) -->
                <div id="compareStep3" class="flex-1 flex flex-col hidden">
                    <!-- Header -->
                    <div class="bg-white border-b border-gray-200 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-900">Resolve Conflicts</h2>
                                <p class="text-sm text-gray-600">Review and resolve differences between models</p>
                            </div>
                            <button onclick="goToStep(2)" class="text-gray-400 hover:text-gray-600">
                                <span class="material-symbols-outlined">close</span>
                            </button>
                        </div>
                    </div>

                    <!-- Resolution Progress -->
                    <div class="bg-white border-b border-gray-200 px-6 py-4">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-900">Resolution Progress</h3>
                            <span class="text-sm text-gray-600">8 of 12 conflicts resolved</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-600 h-2 rounded-full" style="width: 67%"></div>
                        </div>
                    </div>

                    <!-- Conflict List -->
                    <div class="flex-1 overflow-y-auto p-6">
                        <div class="max-w-4xl mx-auto space-y-4" id="conflictsList">
                            <!-- Will be populated with conflicts -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="bg-white border-t border-gray-200 px-6 py-4 flex justify-between">
                        <button onclick="goToStep(2)" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            ← Back to Comparison
                        </button>
                        <div class="space-x-2">
                            <button onclick="autoResolveConflicts()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                Auto Resolve
                            </button>
                            <button onclick="generateMergeModel()" class="px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700">
                                Generate Merge Model
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Original Diagram Elements (Now Hidden) -->
            <div id="originalDiagramElements" class="hidden">
            <div class="flex-1 canvas bg-gray-100 relative" id="diagramCanvas">
                <!-- Sample Entities -->
                <div class="entity-box" style="top: 80px; left: 80px;" onclick="selectEntity(this)">
                    <div class="bg-blue-600 text-white px-3 py-2 font-semibold text-sm flex items-center">
                        <span class="material-symbols-outlined mr-2 text-sm">table_chart</span>
                        Customer
                    </div>
                    <div class="p-3">
                        <div class="space-y-1 text-xs">
                            <div class="flex items-center">
                                <span class="material-symbols-outlined mr-2 text-xs text-yellow-600">key</span>
                                <span class="font-medium">customer_id</span>
                                <span class="text-gray-500 ml-auto">INT</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>first_name</span>
                                <span class="text-gray-500 ml-auto">VARCHAR(50)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>last_name</span>
                                <span class="text-gray-500 ml-auto">VARCHAR(50)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>email</span>
                                <span class="text-gray-500 ml-auto">VARCHAR(100)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>created_date</span>
                                <span class="text-gray-500 ml-auto">DATETIME</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="entity-box" style="top: 80px; left: 350px;" onclick="selectEntity(this)">
                    <div class="bg-green-600 text-white px-3 py-2 font-semibold text-sm flex items-center">
                        <span class="material-symbols-outlined mr-2 text-sm">table_chart</span>
                        Order
                    </div>
                    <div class="p-3">
                        <div class="space-y-1 text-xs">
                            <div class="flex items-center">
                                <span class="material-symbols-outlined mr-2 text-xs text-yellow-600">key</span>
                                <span class="font-medium">order_id</span>
                                <span class="text-gray-500 ml-auto">INT</span>
                            </div>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined mr-2 text-xs text-blue-600">link</span>
                                <span>customer_id</span>
                                <span class="text-gray-500 ml-auto">INT</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>order_date</span>
                                <span class="text-gray-500 ml-auto">DATETIME</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>total_amount</span>
                                <span class="text-gray-500 ml-auto">DECIMAL(10,2)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="entity-box" style="top: 280px; left: 200px;" onclick="selectEntity(this)">
                    <div class="bg-purple-600 text-white px-3 py-2 font-semibold text-sm flex items-center">
                        <span class="material-symbols-outlined mr-2 text-sm">table_chart</span>
                        Product
                    </div>
                    <div class="p-3">
                        <div class="space-y-1 text-xs">
                            <div class="flex items-center">
                                <span class="material-symbols-outlined mr-2 text-xs text-yellow-600">key</span>
                                <span class="font-medium">product_id</span>
                                <span class="text-gray-500 ml-auto">INT</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>product_name</span>
                                <span class="text-gray-500 ml-auto">VARCHAR(100)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 mr-2"></span>
                                <span>price</span>
                                <span class="text-gray-500 ml-auto">DECIMAL(10,2)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Docked Floating Toolbar (Left Side) -->
                <div id="dockedToolbar" class="docked-toolbar" style="top: 20px; left: 20px;">
                    <div class="p-2">
                        <!-- Entities & Relationships -->
                        <div class="toolbar-icon" data-tooltip="Add Entity (Ctrl+E)" onclick="addEntity()">
                            <span class="material-symbols-outlined text-base">add_box</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Supertype/Subtype" onclick="addSupertype()">
                            <span class="material-symbols-outlined text-base">account_tree</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Identifying Relationship" onclick="addIdentifyingRel()">
                            <span class="material-symbols-outlined text-base">link</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Non-Identifying Relationship" onclick="addNonIdentifyingRel()">
                            <span class="material-symbols-outlined text-base">trending_flat</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Many-to-Many Relationship" onclick="addManyToMany()">
                            <span class="material-symbols-outlined text-base">device_hub</span>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Visual / Annotation Tools -->
                        <div class="toolbar-icon" data-tooltip="Add Annotation" onclick="addAnnotation()">
                            <span class="material-symbols-outlined text-base">note_add</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Drawing Objects" onclick="addDrawingObject()">
                            <span class="material-symbols-outlined text-base">draw</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Style Tools" onclick="openStyleTools()">
                            <span class="material-symbols-outlined text-base">palette</span>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Diagram Navigation -->
                        <div class="toolbar-icon" data-tooltip="Zoom In (Ctrl++)" onclick="zoomIn()">
                            <span class="material-symbols-outlined text-base">zoom_in</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Zoom Out (Ctrl+-)" onclick="zoomOut()">
                            <span class="material-symbols-outlined text-base">zoom_out</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Fit to Screen (Ctrl+0)" onclick="fitToScreen()">
                            <span class="material-symbols-outlined text-base">fit_screen</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Pan Tool" onclick="enablePan()">
                            <span class="material-symbols-outlined text-base">pan_tool</span>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Alignment & Layout -->
                        <div class="toolbar-icon" data-tooltip="Align Objects" onclick="showAlignMenu()">
                            <span class="material-symbols-outlined text-base">format_align_center</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Distribute Objects" onclick="showDistributeMenu()">
                            <span class="material-symbols-outlined text-base">space_bar</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Group Objects (Ctrl+G)" onclick="groupObjects()">
                            <span class="material-symbols-outlined text-base">group_work</span>
                        </div>
                        <div class="toolbar-icon" data-tooltip="Auto Layout" onclick="autoLayout()">
                            <span class="material-symbols-outlined text-base">auto_awesome</span>
                        </div>
                    </div>
                </div>

                <!-- Contextual Mini-Toolbar -->
                <div id="contextualToolbar" class="contextual-toolbar">
                    <div class="flex items-center p-2 space-x-1" id="contextualToolbarContent">
                        <!-- Content dynamically populated based on selection -->
                    </div>
                </div>

                <!-- Tooltip -->
                <div id="tooltip" class="tooltip"></div>

                <!-- Connection Lines -->
                <svg class="absolute inset-0 w-full h-full pointer-events-none" style="z-index: 1;">
                    <line x1="260" y1="140" x2="350" y2="140" stroke="#6366f1" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="305" y="135" fill="#6366f1" font-size="11" text-anchor="middle">1:N</text>

                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
                        </marker>
                    </defs>
                </svg>
            </div>

            <!-- Diagram Tabs -->
            <div class="bg-gray-100 border-t border-gray-200 px-4 py-2" id="diagramTabs">
                <div class="flex space-x-1">
                    <button class="px-3 py-1 bg-white border border-gray-300 rounded text-xs font-medium">Main Diagram</button>
                    <button class="px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-xs">User Management</button>
                    <button class="px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-xs">+ New Diagram</button>
                </div>
            </div>

            <!-- Reverse Engineering Mode Canvas -->
            <div class="flex-1 bg-white overflow-y-auto hidden" id="reverseEngineeringCanvas">
                <div class="max-w-4xl mx-auto p-8">
                    <!-- Header -->
                    <div class="text-center mb-8">
                        <h1 class="text-2xl font-bold text-gray-900 mb-2">Reverse Engineering</h1>
                        <p class="text-gray-600">Extract database schema and generate data model</p>
                    </div>

                    <!-- Reverse Engineering Flow -->
                    <div class="space-y-6">
                        <!-- 1. Connection Details -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('connectionDetails')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">database</span>
                                        Connection Details
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="connectionDetailsIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="connectionDetailsContent" class="p-4 space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Database Type</label>
                                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm" onchange="updateDefaultPort(this.value)">
                                            <option value="sqlserver">SQL Server</option>
                                            <option value="oracle">Oracle</option>
                                            <option value="mysql">MySQL</option>
                                            <option value="postgresql">PostgreSQL</option>
                                            <option value="db2">IBM DB2</option>
                                            <option value="snowflake">Snowflake</option>
                                            <option value="bigquery">Google BigQuery</option>
                                            <option value="redshift">Amazon Redshift</option>
                                            <option value="msfabric">MS Fabric</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Port</label>
                                        <input type="text" id="portField" value="1433" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Server/Host</label>
                                    <input type="text" placeholder="localhost" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-3">Authentication</label>
                                    <div class="space-y-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="auth" value="windows" class="mr-3">
                                            <span class="text-sm">Windows Authentication</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="auth" value="sql" class="mr-3" checked>
                                            <span class="text-sm">SQL Authentication</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="auth" value="cloud" class="mr-3">
                                            <span class="text-sm">Cloud Authentication</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                                        <input type="text" placeholder="username" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                        <input type="password" placeholder="password" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    </div>
                                </div>
                                <button onclick="testConnection()" class="w-full bg-indigo-600 text-white px-4 py-3 rounded-md text-sm font-medium hover:bg-indigo-700 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-base mr-2">wifi_protected_setup</span>
                                    Test Connection
                                </button>
                                <div id="connectionStatus" class="text-sm p-3 rounded-md hidden"></div>
                            </div>
                        </div>

                        <!-- 2. Schema & Object Selection -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('objectSelection')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">account_tree</span>
                                        Schema & Object Selection
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="objectSelectionIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="objectSelectionContent" class="p-4 space-y-4 hidden">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Database/Schema</label>
                                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        <option value="">Select database...</option>
                                        <option value="northwind">Northwind</option>
                                        <option value="adventureworks">AdventureWorks</option>
                                        <option value="sakila">Sakila</option>
                                    </select>
                                </div>
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">Object Types</label>
                                        <div class="space-y-2">
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Tables</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Views</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Stored Procedures</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Functions</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Indexes</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Relationships</span>
                                            </label>
                                        </div>
                                        <div class="flex gap-3 mt-3">
                                            <button onclick="selectAllObjects()" class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">Select All</button>
                                            <button onclick="deselectAllObjects()" class="text-sm text-gray-600 hover:text-gray-700 font-medium">Deselect All</button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">Object Preview</label>
                                        <div class="border border-gray-200 rounded-md max-h-48 overflow-y-auto">
                                            <div class="p-3">
                                                <div class="flex items-center text-sm text-gray-600 mb-2">
                                                    <span class="material-symbols-outlined text-base mr-2">table_chart</span>
                                                    <span class="font-medium">Tables (5)</span>
                                                </div>
                                                <div class="ml-6 space-y-2">
                                                    <div class="flex items-center justify-between">
                                                        <span class="text-sm">Customers</span>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <span class="material-symbols-outlined text-sm">more_vert</span>
                                                        </button>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <span class="text-sm">Orders</span>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <span class="material-symbols-outlined text-sm">more_vert</span>
                                                        </button>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <span class="text-sm">Products</span>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <span class="material-symbols-outlined text-sm">more_vert</span>
                                                        </button>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <span class="text-sm">Categories</span>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <span class="material-symbols-outlined text-sm">more_vert</span>
                                                        </button>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <span class="text-sm">Suppliers</span>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <span class="material-symbols-outlined text-sm">more_vert</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 3. Naming & Standards -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('namingStandards')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">badge</span>
                                        Naming & Standards
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="namingStandardsIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="namingStandardsContent" class="p-4 space-y-4 hidden">
                                <div class="flex items-center justify-between">
                                    <label class="text-sm font-medium text-gray-700">Apply Naming Standards</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Case Enforcement</label>
                                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                            <option value="uppercase">UPPERCASE</option>
                                            <option value="lowercase">lowercase</option>
                                            <option value="camelcase">CamelCase</option>
                                            <option value="pascalcase">PascalCase</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Prefix</label>
                                        <input type="text" placeholder="tbl_" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Suffix</label>
                                        <input type="text" placeholder="_t" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" class="mr-3">
                                    <label class="text-sm text-gray-700">Auto-rename conflicts</label>
                                </div>
                            </div>
                        </div>

                        <!-- 4. Options & Filters -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('optionsFilters')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">tune</span>
                                        Options & Filters
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="optionsFiltersIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="optionsFiltersContent" class="p-4 space-y-4 hidden">
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-between">
                                            <label class="text-sm font-medium text-gray-700">Import only objects with relationships</label>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" class="sr-only peer">
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center">
                                            <input type="checkbox" class="mr-3" checked>
                                            <label class="text-sm text-gray-700">Exclude system objects</label>
                                        </div>
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Filter by Object Name</label>
                                            <input type="text" placeholder="e.g., ^(tbl|view).*" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                            <p class="text-xs text-gray-500 mt-1">Use regex patterns to include/exclude objects</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Object Limit (Performance)</label>
                                            <input type="number" value="100" min="1" max="1000" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 5. Preview & Confirmation -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('previewConfirmation')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">preview</span>
                                        Preview & Confirmation
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="previewConfirmationIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="previewConfirmationContent" class="p-4 space-y-4 hidden">
                                <button onclick="previewObjects()" class="w-full bg-gray-600 text-white px-4 py-3 rounded-md text-sm font-medium hover:bg-gray-700 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-base mr-2">preview</span>
                                    Preview Objects
                                </button>
                                <div id="previewResults" class="hidden">
                                    <div class="bg-gray-50 border border-gray-200 rounded-md p-4">
                                        <div class="text-sm font-medium text-gray-700 mb-3">Selected Objects:</div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="space-y-1">
                                                <div class="flex items-center justify-between text-sm">
                                                    <span>Tables:</span>
                                                    <span class="font-medium">5</span>
                                                </div>
                                                <div class="flex items-center justify-between text-sm">
                                                    <span>Views:</span>
                                                    <span class="font-medium">2</span>
                                                </div>
                                            </div>
                                            <div class="space-y-1">
                                                <div class="flex items-center justify-between text-sm">
                                                    <span>Relationships:</span>
                                                    <span class="font-medium">8</span>
                                                </div>
                                                <div class="flex items-center justify-between text-sm">
                                                    <span>Indexes:</span>
                                                    <span class="font-medium">12</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-blue-50 border border-blue-200 rounded-md p-4">
                                    <div class="flex items-center text-sm text-blue-700">
                                        <span class="material-symbols-outlined text-base mr-2">info</span>
                                        <span>Estimated diagram size: Medium (7 entities, 8 relationships)</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 6. Actions -->
                        <div class="flex gap-4 pt-6 border-t border-gray-200">
                            <button onclick="generateDiagram()" class="flex-1 bg-indigo-600 text-white px-6 py-4 rounded-md text-base font-medium hover:bg-indigo-700 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-3">auto_awesome</span>
                                Generate Diagram
                            </button>
                            <button onclick="saveTemplate()" class="bg-gray-200 text-gray-700 px-6 py-4 rounded-md text-base font-medium hover:bg-gray-300 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-2">save</span>
                                Save Template
                            </button>
                            <button onclick="cancelReverseEngineering()" class="bg-gray-200 text-gray-700 px-6 py-4 rounded-md text-base font-medium hover:bg-gray-300">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Complete Compare Mode Canvas -->
            <div class="flex-1 bg-white overflow-y-auto hidden" id="completeCompareCanvas">
                <div class="max-w-6xl mx-auto p-8">
                    <!-- Header -->
                    <div class="text-center mb-8">
                        <h1 class="text-2xl font-bold text-gray-900 mb-2">Complete Compare</h1>
                        <p class="text-gray-600">Compare models and analyze differences comprehensively</p>
                    </div>

                    <!-- Complete Compare Flow -->
                    <div class="space-y-6">
                        <!-- 1. Select Source & Target -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('sourceTarget')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">input</span>
                                        Select Source & Target
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="sourceTargetIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="sourceTargetContent" class="p-4 space-y-6">
                                <div class="grid grid-cols-2 gap-8">
                                    <!-- Source Model -->
                                    <div class="space-y-4">
                                        <h4 class="text-base font-medium text-gray-900 flex items-center">
                                            <span class="material-symbols-outlined text-base mr-2 text-blue-600">source</span>
                                            Source Model
                                        </h4>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Source Type</label>
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm" onchange="updateSourceOptions(this.value)">
                                                <option value="">Select source...</option>
                                                <option value="local">Open Model (Local)</option>
                                                <option value="repository">Mart Repository</option>
                                                <option value="cloud">Cloud Repo (GitHub)</option>
                                                <option value="database">Database (via RE)</option>
                                            </select>
                                        </div>
                                        <div id="sourceDetails" class="space-y-3">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Select File/Database</label>
                                                <input type="text" placeholder="Browse or enter path..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Target Model -->
                                    <div class="space-y-4">
                                        <h4 class="text-base font-medium text-gray-900 flex items-center">
                                            <span class="material-symbols-outlined text-base mr-2 text-green-600">target</span>
                                            Target Model
                                        </h4>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Target Type</label>
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm" onchange="updateTargetOptions(this.value)">
                                                <option value="">Select target...</option>
                                                <option value="local">Open Model (Local)</option>
                                                <option value="repository">Mart Repository</option>
                                                <option value="cloud">Cloud Repo (GitHub)</option>
                                                <option value="database">Database (via RE)</option>
                                            </select>
                                        </div>
                                        <div id="targetDetails" class="space-y-3">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Select File/Database</label>
                                                <input type="text" placeholder="Browse or enter path..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Swap Button -->
                                <div class="flex justify-center">
                                    <button onclick="swapSourceTarget()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 flex items-center">
                                        <span class="material-symbols-outlined text-base mr-2">swap_horiz</span>
                                        Swap Source ↔ Target
                                    </button>
                                </div>

                                <!-- Validation Status -->
                                <div id="validationStatus" class="hidden p-3 rounded-md">
                                    <div class="flex items-center text-sm">
                                        <span class="material-symbols-outlined text-base mr-2">check_circle</span>
                                        <span>Both source and target selected. Ready to compare!</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Compare Scope -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('compareScope')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">checklist</span>
                                        Compare Scope
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="compareScopeIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="compareScopeContent" class="p-4 space-y-6 hidden">
                                <div class="grid grid-cols-2 gap-8">
                                    <!-- Object Types -->
                                    <div>
                                        <h4 class="text-base font-medium text-gray-900 mb-4">Object Types</h4>
                                        <div class="space-y-2">
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Tables / Entities</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Columns / Attributes</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Keys (PK, FK, Unique, Alternate)</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <span class="text-sm">Relationships</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Views</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Indexes</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Procedures / Functions</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Domains / User-defined datatypes</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Business Rules / Constraints</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <span class="text-sm">Notes / Annotations</span>
                                            </label>
                                        </div>
                                        <div class="flex gap-3 mt-4">
                                            <button onclick="selectAllCompareObjects()" class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">Select All</button>
                                            <button onclick="deselectAllCompareObjects()" class="text-sm text-gray-600 hover:text-gray-700 font-medium">Deselect All</button>
                                        </div>
                                    </div>

                                    <!-- Filters -->
                                    <div>
                                        <h4 class="text-base font-medium text-gray-900 mb-4">Filters</h4>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Schema Filter</label>
                                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                    <option value="">All schemas</option>
                                                    <option value="dbo">dbo</option>
                                                    <option value="public">public</option>
                                                    <option value="main">main</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Name/Pattern Filter</label>
                                                <input type="text" placeholder="e.g., tbl_* or ^Customer.*" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                <p class="text-xs text-gray-500 mt-1">Use wildcards or regex patterns</p>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Include/Exclude Objects</label>
                                                <div class="border border-gray-200 rounded-md max-h-32 overflow-y-auto p-2">
                                                    <div class="space-y-1">
                                                        <label class="flex items-center text-sm">
                                                            <input type="checkbox" class="mr-2" checked>
                                                            <span>Customers</span>
                                                        </label>
                                                        <label class="flex items-center text-sm">
                                                            <input type="checkbox" class="mr-2" checked>
                                                            <span>Orders</span>
                                                        </label>
                                                        <label class="flex items-center text-sm">
                                                            <input type="checkbox" class="mr-2" checked>
                                                            <span>Products</span>
                                                        </label>
                                                        <label class="flex items-center text-sm">
                                                            <input type="checkbox" class="mr-2">
                                                            <span>TempTable</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 3. Compare Rules -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('compareRules')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">rule</span>
                                        Compare Rules
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="compareRulesIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="compareRulesContent" class="p-4 space-y-6 hidden">
                                <div class="grid grid-cols-2 gap-8">
                                    <div class="space-y-4">
                                        <h4 class="text-base font-medium text-gray-900">Comparison Options</h4>
                                        <div class="space-y-3">
                                            <div class="flex items-center justify-between">
                                                <label class="text-sm font-medium text-gray-700">Case sensitivity</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer">
                                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <label class="text-sm text-gray-700">Treat NULL vs NOT NULL as difference</label>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" class="mr-3" checked>
                                                <label class="text-sm text-gray-700">Treat datatype precision/scale changes as difference</label>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" class="mr-3">
                                                <label class="text-sm text-gray-700">Ignore whitespace/comments for procedures/functions</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <h4 class="text-base font-medium text-gray-900">Advanced Settings</h4>
                                        <div class="space-y-3">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Naming standards enforcement</label>
                                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                    <option value="none">None</option>
                                                    <option value="strict">Strict</option>
                                                    <option value="loose">Loose</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Mapping rules</label>
                                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                    <option value="name">Auto map by Name</option>
                                                    <option value="uid">Auto map by UID</option>
                                                    <option value="custom">Custom mapping</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 4. Comparison Results -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('comparisonResults')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">analytics</span>
                                        Comparison Results
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="comparisonResultsIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="comparisonResultsContent" class="p-4 space-y-4 hidden">
                                <!-- Summary Panel -->
                                <div class="bg-gray-50 border border-gray-200 rounded-md p-4">
                                    <h4 class="text-base font-medium text-gray-900 mb-3">Comparison Summary</h4>
                                    <div class="grid grid-cols-4 gap-4 text-center">
                                        <div class="bg-green-50 border border-green-200 rounded p-3">
                                            <div class="text-lg font-bold text-green-700">12</div>
                                            <div class="text-xs text-green-600">Added</div>
                                        </div>
                                        <div class="bg-red-50 border border-red-200 rounded p-3">
                                            <div class="text-lg font-bold text-red-700">3</div>
                                            <div class="text-xs text-red-600">Deleted</div>
                                        </div>
                                        <div class="bg-yellow-50 border border-yellow-200 rounded p-3">
                                            <div class="text-lg font-bold text-yellow-700">8</div>
                                            <div class="text-xs text-yellow-600">Modified</div>
                                        </div>
                                        <div class="bg-blue-50 border border-blue-200 rounded p-3">
                                            <div class="text-lg font-bold text-blue-700">23</div>
                                            <div class="text-xs text-blue-600">Total Changes</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Side-by-side Comparison -->
                                <div class="space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <!-- Source -->
                                        <div class="border border-gray-200 rounded-md">
                                            <div class="bg-blue-50 px-4 py-2 border-b border-gray-200">
                                                <h5 class="font-medium text-blue-900">Source Model (v1.2.0)</h5>
                                                <p class="text-xs text-blue-700">E-Commerce Database Schema</p>
                                            </div>
                                            <div class="p-4 max-h-96 overflow-y-auto">
                                                <div class="space-y-2">
                                                    <!-- Unchanged tables -->
                                                    <div class="flex items-center p-2 bg-gray-50 rounded cursor-pointer hover:bg-gray-100" onclick="toggleObjectDetails('customers-details')">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Customers</span>
                                                        <span class="text-xs text-gray-500">12 columns</span>
                                                    </div>

                                                    <!-- Added table -->
                                                    <div class="flex items-center p-2 bg-green-50 rounded border border-green-200 cursor-pointer hover:bg-green-100" onclick="toggleObjectDetails('orders-details')">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-green-600">add</span>
                                                        <span class="text-sm flex-1">Orders</span>
                                                        <span class="text-xs text-green-600">8 columns</span>
                                                    </div>

                                                    <!-- Modified table -->
                                                    <div class="flex items-center p-2 bg-yellow-50 rounded border border-yellow-200 cursor-pointer hover:bg-yellow-100" onclick="toggleObjectDetails('products-details')">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-yellow-600">edit</span>
                                                        <span class="text-sm flex-1">Products</span>
                                                        <span class="text-xs text-yellow-600">9 columns</span>
                                                    </div>

                                                    <div class="flex items-center p-2 bg-gray-50 rounded">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Categories</span>
                                                        <span class="text-xs text-gray-500">4 columns</span>
                                                    </div>

                                                    <!-- Deleted table -->
                                                    <div class="flex items-center p-2 bg-red-50 rounded border border-red-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-red-600">remove</span>
                                                        <span class="text-sm flex-1 line-through">OrderDetails</span>
                                                        <span class="text-xs text-red-600">5 columns</span>
                                                    </div>

                                                    <div class="flex items-center p-2 bg-gray-50 rounded">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Suppliers</span>
                                                        <span class="text-xs text-gray-500">7 columns</span>
                                                    </div>

                                                    <!-- Added view -->
                                                    <div class="flex items-center p-2 bg-green-50 rounded border border-green-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-green-600">add</span>
                                                        <span class="text-sm flex-1">vw_CustomerOrders</span>
                                                        <span class="text-xs text-green-600">View</span>
                                                    </div>

                                                    <!-- Modified relationship -->
                                                    <div class="flex items-center p-2 bg-yellow-50 rounded border border-yellow-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-yellow-600">edit</span>
                                                        <span class="text-sm flex-1">FK_Orders_Customers</span>
                                                        <span class="text-xs text-yellow-600">Relationship</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Target -->
                                        <div class="border border-gray-200 rounded-md">
                                            <div class="bg-green-50 px-4 py-2 border-b border-gray-200">
                                                <h5 class="font-medium text-green-900">Target Model (v2.0.0)</h5>
                                                <p class="text-xs text-green-700">Enhanced E-Commerce Database</p>
                                            </div>
                                            <div class="p-4 max-h-96 overflow-y-auto">
                                                <div class="space-y-2">
                                                    <!-- Unchanged tables -->
                                                    <div class="flex items-center p-2 bg-gray-50 rounded cursor-pointer hover:bg-gray-100">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Customers</span>
                                                        <span class="text-xs text-gray-500">12 columns</span>
                                                    </div>

                                                    <!-- Missing in target -->
                                                    <div class="flex items-center p-2 bg-red-50 rounded border border-red-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-red-600">remove</span>
                                                        <span class="text-sm flex-1 line-through">Orders</span>
                                                        <span class="text-xs text-red-600">Not found</span>
                                                    </div>

                                                    <!-- Modified table -->
                                                    <div class="flex items-center p-2 bg-yellow-50 rounded border border-yellow-200 cursor-pointer hover:bg-yellow-100">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-yellow-600">edit</span>
                                                        <span class="text-sm flex-1">Products</span>
                                                        <span class="text-xs text-yellow-600">11 columns</span>
                                                    </div>

                                                    <div class="flex items-center p-2 bg-gray-50 rounded">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Categories</span>
                                                        <span class="text-xs text-gray-500">4 columns</span>
                                                    </div>

                                                    <!-- New in target -->
                                                    <div class="flex items-center p-2 bg-green-50 rounded border border-green-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-green-600">add</span>
                                                        <span class="text-sm flex-1">OrderLineItems</span>
                                                        <span class="text-xs text-green-600">7 columns</span>
                                                    </div>

                                                    <div class="flex items-center p-2 bg-gray-50 rounded">
                                                        <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                        <span class="text-sm flex-1">Suppliers</span>
                                                        <span class="text-xs text-gray-500">7 columns</span>
                                                    </div>

                                                    <!-- Missing view -->
                                                    <div class="flex items-center p-2 bg-red-50 rounded border border-red-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-red-600">remove</span>
                                                        <span class="text-sm flex-1 line-through">vw_CustomerOrders</span>
                                                        <span class="text-xs text-red-600">Not found</span>
                                                    </div>

                                                    <!-- New relationship -->
                                                    <div class="flex items-center p-2 bg-green-50 rounded border border-green-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-green-600">add</span>
                                                        <span class="text-sm flex-1">FK_OrderLineItems_Products</span>
                                                        <span class="text-xs text-green-600">Relationship</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Detailed Object Differences -->
                                    <div class="space-y-3">
                                        <h4 class="text-base font-medium text-gray-900">Detailed Object Differences</h4>

                                        <!-- Products table details -->
                                        <div id="products-details" class="border border-yellow-200 rounded-md bg-yellow-50">
                                            <div class="p-3 border-b border-yellow-200 bg-yellow-100">
                                                <h5 class="font-medium text-yellow-900 flex items-center">
                                                    <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                                                    Products Table - Column Differences
                                                </h5>
                                            </div>
                                            <div class="p-4">
                                                <div class="grid grid-cols-2 gap-4 text-sm">
                                                    <div>
                                                        <h6 class="font-medium text-gray-700 mb-2">Source (v1.2.0)</h6>
                                                        <div class="space-y-1">
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>ProductID (int, PK)</span>
                                                            </div>
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>ProductName (varchar(40))</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-red-50">
                                                                <span class="w-3 h-3 bg-red-500 rounded mr-2"></span>
                                                                <span class="line-through">Description (varchar(255))</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-yellow-50">
                                                                <span class="w-3 h-3 bg-yellow-500 rounded mr-2"></span>
                                                                <span>UnitPrice (decimal(10,2))</span>
                                                            </div>
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>UnitsInStock (smallint)</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <h6 class="font-medium text-gray-700 mb-2">Target (v2.0.0)</h6>
                                                        <div class="space-y-1">
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>ProductID (int, PK)</span>
                                                            </div>
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>ProductName (varchar(40))</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-green-50">
                                                                <span class="w-3 h-3 bg-green-500 rounded mr-2"></span>
                                                                <span>ShortDescription (varchar(100))</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-green-50">
                                                                <span class="w-3 h-3 bg-green-500 rounded mr-2"></span>
                                                                <span>LongDescription (text)</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-yellow-50">
                                                                <span class="w-3 h-3 bg-yellow-500 rounded mr-2"></span>
                                                                <span>UnitPrice (decimal(15,4))</span>
                                                            </div>
                                                            <div class="flex items-center p-1">
                                                                <span class="w-3 h-3 bg-gray-300 rounded mr-2"></span>
                                                                <span>UnitsInStock (smallint)</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-green-50">
                                                                <span class="w-3 h-3 bg-green-500 rounded mr-2"></span>
                                                                <span>SKU (varchar(20), UNIQUE)</span>
                                                            </div>
                                                            <div class="flex items-center p-1 bg-green-50">
                                                                <span class="w-3 h-3 bg-green-500 rounded mr-2"></span>
                                                                <span>CreatedDate (datetime)</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Orders vs OrderLineItems -->
                                        <div class="border border-blue-200 rounded-md bg-blue-50">
                                            <div class="p-3 border-b border-blue-200 bg-blue-100">
                                                <h5 class="font-medium text-blue-900 flex items-center">
                                                    <span class="material-symbols-outlined text-sm mr-2">compare_arrows</span>
                                                    Structural Changes: Orders → OrderLineItems
                                                </h5>
                                            </div>
                                            <div class="p-4">
                                                <div class="text-sm space-y-2">
                                                    <div class="flex items-center p-2 bg-red-50 rounded border border-red-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-red-600">remove</span>
                                                        <span>Orders table removed from source</span>
                                                    </div>
                                                    <div class="flex items-center p-2 bg-green-50 rounded border border-green-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-green-600">add</span>
                                                        <span>OrderLineItems table added in target with enhanced structure</span>
                                                    </div>
                                                    <div class="flex items-center p-2 bg-yellow-50 rounded border border-yellow-200">
                                                        <span class="material-symbols-outlined text-sm mr-2 text-yellow-600">info</span>
                                                        <span>Relationship FK_Orders_Customers needs to be updated to FK_OrderLineItems_Customers</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 5. Merge Options -->
                        <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
                            <div class="p-4 border-b border-gray-200 cursor-pointer" onclick="toggleSection('mergeOptions')">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900 flex items-center">
                                        <span class="material-symbols-outlined text-lg mr-3 text-indigo-600">merge</span>
                                        Merge Options
                                    </h3>
                                    <span class="material-symbols-outlined text-lg text-gray-400" id="mergeOptionsIcon">expand_more</span>
                                </div>
                            </div>
                            <div id="mergeOptionsContent" class="p-4 space-y-6 hidden">
                                <div class="grid grid-cols-2 gap-8">
                                    <div>
                                        <h4 class="text-base font-medium text-gray-900 mb-4">Select Objects to Merge</h4>
                                        <div class="border border-gray-200 rounded-md max-h-48 overflow-y-auto">
                                            <div class="p-3 space-y-2">
                                                <label class="flex items-center">
                                                    <input type="checkbox" class="mr-3" checked>
                                                    <span class="text-sm text-green-700">+ Orders table</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" class="mr-3" checked>
                                                    <span class="text-sm text-yellow-700">~ Products name change</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" class="mr-3">
                                                    <span class="text-sm text-red-700">- Order_Details table</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" class="mr-3" checked>
                                                    <span class="text-sm text-yellow-700">~ Customer.email datatype</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="flex gap-3 mt-3">
                                            <button onclick="selectAllMergeObjects()" class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">Select All</button>
                                            <button onclick="deselectAllMergeObjects()" class="text-sm text-gray-600 hover:text-gray-700 font-medium">Deselect All</button>
                                        </div>
                                    </div>

                                    <div>
                                        <h4 class="text-base font-medium text-gray-900 mb-4">Merge Direction & Conflicts</h4>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Merge Direction</label>
                                                <div class="space-y-2">
                                                    <label class="flex items-center">
                                                        <input type="radio" name="mergeDirection" value="sourceToTarget" class="mr-3" checked>
                                                        <span class="text-sm">Source → Target</span>
                                                    </label>
                                                    <label class="flex items-center">
                                                        <input type="radio" name="mergeDirection" value="targetToSource" class="mr-3">
                                                        <span class="text-sm">Target → Source</span>
                                                    </label>
                                                    <label class="flex items-center">
                                                        <input type="radio" name="mergeDirection" value="manual" class="mr-3">
                                                        <span class="text-sm">Manual one-by-one</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Conflict Resolution</label>
                                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                    <option value="keepSource">Keep Source</option>
                                                    <option value="keepTarget">Keep Target</option>
                                                    <option value="custom">Custom merge</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 6. Final Actions -->
                        <div class="flex gap-4 pt-6 border-t border-gray-200">
                            <button onclick="runComparison()" class="bg-blue-600 text-white px-6 py-4 rounded-md text-base font-medium hover:bg-blue-700 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-3">play_arrow</span>
                                Run Comparison
                            </button>
                            <button onclick="generateComparisonReport()" class="bg-gray-600 text-white px-6 py-4 rounded-md text-base font-medium hover:bg-gray-700 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-2">description</span>
                                Generate Report
                            </button>
                            <button onclick="applyMerge()" class="bg-indigo-600 text-white px-6 py-4 rounded-md text-base font-medium hover:bg-indigo-700 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-3">merge</span>
                                Apply Merge
                            </button>
                            <button onclick="saveCompareSettings()" class="bg-gray-200 text-gray-700 px-6 py-4 rounded-md text-base font-medium hover:bg-gray-300 flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg mr-2">save</span>
                                Save Settings
                            </button>
                            <button onclick="cancelCompleteCompare()" class="bg-gray-200 text-gray-700 px-6 py-4 rounded-md text-base font-medium hover:bg-gray-300">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </div>

        <!-- Original Properties Panel (Hidden in Compare Mode) -->
        <div class="hidden" id="originalPropertiesPanel">
        <div class="w-[25%] bg-white border-l border-gray-200 flex flex-col" id="propertiesPanel">
            <!-- Header -->
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center justify-between mb-2">
                    <h3 class="font-semibold text-gray-900" id="panelTitle">Properties</h3>
                </div>
                <p class="text-xs text-gray-500" id="panelSubtitle">Entity: Customer</p>
            </div>

            <!-- Properties Mode Content -->
            <div id="propertiesMode" class="flex-1 overflow-y-auto p-4">
                <div class="space-y-6">
                    <!-- Entity Properties -->
                    <div>
                        <h4 class="text-sm font-medium text-gray-900 mb-3">Entity Properties</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Name</label>
                                <input type="text" value="Customer" class="w-full px-2 py-1 border border-gray-300 rounded text-sm">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Type</label>
                                <select class="w-full px-2 py-1 border border-gray-300 rounded text-sm">
                                    <option>Entity</option>
                                    <option>Associative</option>
                                    <option>Supertype</option>
                                    <option>Subtype</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Schema</label>
                                <input type="text" value="dbo" class="w-full px-2 py-1 border border-gray-300 rounded text-sm">
                            </div>
                        </div>
                    </div>

                    <!-- Attributes -->
                    <div>
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-sm font-medium text-gray-900">Attributes</h4>
                            <button class="text-indigo-600 hover:text-indigo-700 text-xs">+ Add</button>
                        </div>
                        <div class="space-y-2">
                            <div class="border border-gray-200 rounded p-2">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-medium text-xs">customer_id</span>
                                    <div class="flex items-center space-x-1">
                                        <span class="material-symbols-outlined text-yellow-600 text-xs">key</span>
                                        <button class="text-gray-400 hover:text-red-600">
                                            <span class="material-symbols-outlined text-xs">delete</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="text-xs text-gray-500">INT • Primary Key • Not Null</div>
                            </div>

                            <div class="border border-gray-200 rounded p-2">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-medium text-xs">first_name</span>
                                    <button class="text-gray-400 hover:text-red-600">
                                        <span class="material-symbols-outlined text-xs">delete</span>
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500">VARCHAR(50) • Not Null</div>
                            </div>

                            <div class="border border-gray-200 rounded p-2">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-medium text-xs">email</span>
                                    <button class="text-gray-400 hover:text-red-600">
                                        <span class="material-symbols-outlined text-xs">delete</span>
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500">VARCHAR(100) • Unique</div>
                            </div>
                        </div>
                    </div>

                    <!-- Appearance -->
                    <div>
                        <h4 class="text-sm font-medium text-gray-900 mb-3">Appearance</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Header Color</label>
                                <div class="flex space-x-2">
                                    <div class="w-6 h-6 bg-blue-600 rounded cursor-pointer border-2 border-blue-600"></div>
                                    <div class="w-6 h-6 bg-green-600 rounded cursor-pointer border-2 border-transparent hover:border-gray-300"></div>
                                    <div class="w-6 h-6 bg-purple-600 rounded cursor-pointer border-2 border-transparent hover:border-gray-300"></div>
                                    <div class="w-6 h-6 bg-red-600 rounded cursor-pointer border-2 border-transparent hover:border-gray-300"></div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="showDataTypes" class="mr-2">
                                <label for="showDataTypes" class="text-xs text-gray-700">Show Data Types</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="showKeys" class="mr-2" checked>
                                <label for="showKeys" class="text-xs text-gray-700">Show Key Icons</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        </div>
    </div>

    <script>
        // Complete Compare Mode Variables
        let compareMode = true; // Always in compare mode for this file
        let currentCompareStep = 1;
        let leftModel = null;
        let rightModel = null;
        let mergeModel = null;

        // Original modeler variables (preserved for compatibility)
        let selectedEntity = null;
        let selectedEntities = [];
        let isDragging = false;
        let isToolbarDragging = false;
        let currentMode = 'select'; // select, pan, etc.

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.primary-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('.ribbon-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById('ribbon-' + tabName).classList.remove('hidden');
        }

        // Entity interaction
        function selectEntity(entity) {
            document.querySelectorAll('.entity-box').forEach(e => {
                e.classList.remove('selected');
            });
            entity.classList.add('selected');
            selectedEntity = entity;
            selectedEntities = [entity];

            // Update properties panel
            const entityName = entity.querySelector('.bg-blue-600, .bg-green-600, .bg-purple-600').textContent.trim();
            document.querySelector('.properties p').textContent = `Entity: ${entityName}`;

            // Show contextual toolbar
            showContextualToolbar(entity, 'entity');
        }

        // Contextual Toolbar Functions
        function showContextualToolbar(element, type) {
            const toolbar = document.getElementById('contextualToolbar');
            const content = document.getElementById('contextualToolbarContent');

            // Clear existing content
            content.innerHTML = '';

            // Position near the selected element
            const rect = element.getBoundingClientRect();
            const canvasRect = document.getElementById('diagramCanvas').getBoundingClientRect();

            const x = rect.right - canvasRect.left + 10;
            const y = rect.top - canvasRect.top;

            toolbar.style.left = x + 'px';
            toolbar.style.top = y + 'px';

            // Add context-specific buttons
            if (type === 'entity') {
                content.innerHTML = `
                    <button class="toolbar-icon" onclick="renameEntity()" title="Rename">
                        <span class="material-symbols-outlined text-sm">edit</span>
                    </button>
                    <button class="toolbar-icon" onclick="addAttribute()" title="Add Attribute">
                        <span class="material-symbols-outlined text-sm">add</span>
                    </button>
                    <button class="toolbar-icon" onclick="changeEntityStyle()" title="Change Style">
                        <span class="material-symbols-outlined text-sm">palette</span>
                    </button>
                    <button class="toolbar-icon" onclick="deleteEntity()" title="Delete">
                        <span class="material-symbols-outlined text-sm">delete</span>
                    </button>
                    <button class="toolbar-icon" onclick="viewEntityProperties()" title="Properties">
                        <span class="material-symbols-outlined text-sm">settings</span>
                    </button>
                `;
            } else if (type === 'relationship') {
                content.innerHTML = `
                    <button class="toolbar-icon" onclick="editRelationship()" title="Edit Properties">
                        <span class="material-symbols-outlined text-sm">edit</span>
                    </button>
                    <button class="toolbar-icon" onclick="toggleRelationshipType()" title="Toggle Type">
                        <span class="material-symbols-outlined text-sm">swap_horiz</span>
                    </button>
                    <button class="toolbar-icon" onclick="deleteRelationship()" title="Delete">
                        <span class="material-symbols-outlined text-sm">delete</span>
                    </button>
                `;
            }

            // Show toolbar with animation
            toolbar.classList.add('show');
        }

        function hideContextualToolbar() {
            const toolbar = document.getElementById('contextualToolbar');
            toolbar.classList.remove('show');
        }

        // Tooltip system
        function showTooltip(element, text) {
            const tooltip = document.getElementById('tooltip');
            const rect = element.getBoundingClientRect();

            tooltip.textContent = text;
            tooltip.style.left = (rect.right + 8) + 'px';
            tooltip.style.top = (rect.top + rect.height / 2 - 10) + 'px';
            tooltip.style.opacity = '1';
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.opacity = '0';
        }

        // Toolbar Functions
        function addEntity() {
            alert('Add Entity: Create new entity at cursor position');
        }

        function addSupertype() {
            alert('Add Supertype/Subtype: Create inheritance relationship');
        }

        function addIdentifyingRel() {
            alert('Add Identifying Relationship: Strong relationship with foreign key in primary key');
        }

        function addNonIdentifyingRel() {
            alert('Add Non-Identifying Relationship: Weak relationship with foreign key not in primary key');
        }

        function addManyToMany() {
            alert('Add Many-to-Many Relationship: Create associative entity with relationships');
        }

        function addAnnotation() {
            alert('Add Annotation: Place text annotation on diagram');
        }

        function addDrawingObject() {
            alert('Add Drawing Object: Add rectangle, ellipse, or line');
        }

        function openStyleTools() {
            alert('Style Tools: Change colors, fonts, and borders');
        }

        function zoomIn() {
            alert('Zoom In: Increase diagram zoom level');
        }

        function zoomOut() {
            alert('Zoom Out: Decrease diagram zoom level');
        }

        function fitToScreen() {
            alert('Fit to Screen: Adjust zoom to show all objects');
        }

        function enablePan() {
            currentMode = currentMode === 'pan' ? 'select' : 'pan';
            alert('Pan Mode: ' + (currentMode === 'pan' ? 'Enabled' : 'Disabled'));
        }

        function showAlignMenu() {
            alert('Align Objects: Left, Right, Top, Bottom alignment options');
        }

        function showDistributeMenu() {
            alert('Distribute Objects: Horizontal and vertical distribution');
        }

        function groupObjects() {
            if (selectedEntities.length > 1) {
                alert('Group Objects: Group ' + selectedEntities.length + ' selected objects');
            } else {
                alert('Group Objects: Select multiple objects first');
            }
        }

        function autoLayout() {
            alert('Auto Layout: Automatically arrange entities and relationships');
        }

        // Contextual toolbar functions
        function renameEntity() {
            const newName = prompt('Enter new entity name:', selectedEntity.querySelector('.font-semibold').textContent);
            if (newName) {
                selectedEntity.querySelector('.font-semibold').textContent = newName;
            }
        }

        function addAttribute() {
            alert('Add Attribute: Open attribute editor dialog');
        }

        function changeEntityStyle() {
            alert('Change Style: Open style editor for entity appearance');
        }

        function deleteEntity() {
            if (confirm('Delete this entity?')) {
                selectedEntity.remove();
                hideContextualToolbar();
                selectedEntity = null;
                selectedEntities = [];
            }
        }

        function viewEntityProperties() {
            alert('Entity Properties: Open detailed properties panel');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 'e':
                        e.preventDefault();
                        addEntity();
                        break;
                    case 'g':
                        e.preventDefault();
                        groupObjects();
                        break;
                    case '=':
                    case '+':
                        e.preventDefault();
                        zoomIn();
                        break;
                    case '-':
                        e.preventDefault();
                        zoomOut();
                        break;
                    case '0':
                        e.preventDefault();
                        fitToScreen();
                        break;
                }
            }
        });

        // Dragging functionality for entities
        document.addEventListener('mousedown', function(e) {
            if (e.target.closest('.entity-box')) {
                isDragging = true;
                selectedEntity = e.target.closest('.entity-box');
                selectEntity(selectedEntity);

                const rect = selectedEntity.getBoundingClientRect();
                const canvasRect = document.getElementById('diagramCanvas').getBoundingClientRect();

                const offsetX = e.clientX - rect.left;
                const offsetY = e.clientY - rect.top;

                function onMouseMove(e) {
                    if (isDragging && selectedEntity) {
                        const newX = e.clientX - canvasRect.left - offsetX;
                        const newY = e.clientY - canvasRect.top - offsetY;

                        selectedEntity.style.left = Math.max(0, newX) + 'px';
                        selectedEntity.style.top = Math.max(0, newY) + 'px';

                        hideContextualToolbar();
                    }
                }

                function onMouseUp() {
                    isDragging = false;
                    if (selectedEntity) {
                        showContextualToolbar(selectedEntity, 'entity');
                    }
                    selectedEntity = null;
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                }

                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            } else if (e.target.closest('#dockedToolbar')) {
                // Toolbar dragging
                isToolbarDragging = true;
                const toolbar = document.getElementById('dockedToolbar');
                const rect = toolbar.getBoundingClientRect();
                const canvasRect = document.getElementById('diagramCanvas').getBoundingClientRect();

                const offsetX = e.clientX - rect.left;
                const offsetY = e.clientY - rect.top;

                function onToolbarMove(e) {
                    if (isToolbarDragging) {
                        const newX = e.clientX - canvasRect.left - offsetX;
                        const newY = e.clientY - canvasRect.top - offsetY;

                        toolbar.style.left = Math.max(0, newX) + 'px';
                        toolbar.style.top = Math.max(0, newY) + 'px';
                    }
                }

                function onToolbarUp() {
                    isToolbarDragging = false;
                    document.removeEventListener('mousemove', onToolbarMove);
                    document.removeEventListener('mouseup', onToolbarUp);
                }

                document.addEventListener('mousemove', onToolbarMove);
                document.addEventListener('mouseup', onToolbarUp);
            } else {
                // Click on canvas - hide contextual toolbar
                hideContextualToolbar();
                selectedEntity = null;
                selectedEntities = [];
                document.querySelectorAll('.entity-box').forEach(e => {
                    e.classList.remove('selected');
                });
            }
        });

        // Tooltip events
        document.addEventListener('mouseover', function(e) {
            const toolbarIcon = e.target.closest('.toolbar-icon');
            if (toolbarIcon && toolbarIcon.dataset.tooltip) {
                showTooltip(toolbarIcon, toolbarIcon.dataset.tooltip);
            }
        });

        document.addEventListener('mouseout', function(e) {
            const toolbarIcon = e.target.closest('.toolbar-icon');
            if (toolbarIcon) {
                hideTooltip();
            }
        });

        // Reverse Engineering Functions
        let reverseEngineeringMode = false;

        function toggleReverseEngineering() {
            reverseEngineeringMode = !reverseEngineeringMode;
            const canvasColumn = document.getElementById('canvasColumn');
            const propertiesPanel = document.getElementById('propertiesPanel');
            const modelExplorer = document.querySelector('.model-explorer');
            const diagramCanvas = document.getElementById('diagramCanvas');
            const diagramTabs = document.getElementById('diagramTabs');
            const reverseCanvas = document.getElementById('reverseEngineeringCanvas');
            const mainMenuRE = document.getElementById('mainMenuRE');
            const toolsRibbonRE = document.getElementById('toolsRibbonRE');

            if (reverseEngineeringMode) {
                // Enter RE mode - use full canvas width
                canvasColumn.classList.remove('w-[55%]');
                canvasColumn.classList.add('w-[80%]');

                // Hide properties panel
                propertiesPanel.classList.add('hidden');

                // Disable/gray out model explorer
                modelExplorer.classList.add('opacity-50', 'pointer-events-none');

                // Hide diagram canvas and tabs, show RE canvas
                diagramCanvas.classList.add('hidden');
                diagramTabs.classList.add('hidden');
                reverseCanvas.classList.remove('hidden');

                // Update main menu button
                mainMenuRE.classList.remove('text-gray-600', 'hover:text-indigo-600', 'hover:bg-gray-200');
                mainMenuRE.classList.add('text-white', 'bg-indigo-600');
                mainMenuRE.title = 'Exit Reverse Engineering';

                // Update tools ribbon button
                if (toolsRibbonRE) {
                    toolsRibbonRE.classList.add('bg-indigo-100');
                }
            } else {
                // Exit RE mode - restore normal layout
                canvasColumn.classList.remove('w-[80%]');
                canvasColumn.classList.add('w-[55%]');

                // Show properties panel
                propertiesPanel.classList.remove('hidden');

                // Re-enable model explorer
                modelExplorer.classList.remove('opacity-50', 'pointer-events-none');

                // Show diagram canvas and tabs, hide RE canvas
                diagramCanvas.classList.remove('hidden');
                diagramTabs.classList.remove('hidden');
                reverseCanvas.classList.add('hidden');

                // Update main menu button
                mainMenuRE.classList.remove('text-white', 'bg-indigo-600');
                mainMenuRE.classList.add('text-gray-600', 'hover:text-indigo-600', 'hover:bg-gray-200');
                mainMenuRE.title = 'Reverse Engineering';

                // Update tools ribbon button
                if (toolsRibbonRE) {
                    toolsRibbonRE.classList.remove('bg-indigo-100');
                }
            }
        }

        function toggleSection(sectionName) {
            const content = document.getElementById(sectionName + 'Content');
            const icon = document.getElementById(sectionName + 'Icon');

            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.textContent = 'expand_less';
            } else {
                content.classList.add('hidden');
                icon.textContent = 'expand_more';
            }
        }

        function updateDefaultPort(dbType) {
            const portField = document.getElementById('portField');
            const portMap = {
                'sqlserver': '1433',
                'oracle': '1521',
                'mysql': '3306',
                'postgresql': '5432',
                'db2': '50000',
                'snowflake': '443',
                'bigquery': '443',
                'redshift': '5439',
                'msfabric': '1433'
            };
            if (portField) {
                portField.value = portMap[dbType] || '';
            }
        }

        function testConnection() {
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.classList.remove('hidden');
            statusDiv.className = 'text-xs p-2 rounded bg-blue-50 border border-blue-200 text-blue-700';
            statusDiv.textContent = 'Testing connection...';

            // Simulate connection test
            setTimeout(() => {
                const success = Math.random() > 0.3; // 70% success rate for demo
                if (success) {
                    statusDiv.className = 'text-xs p-2 rounded bg-green-50 border border-green-200 text-green-700';
                    statusDiv.innerHTML = '<span class="material-symbols-outlined text-sm mr-1">check_circle</span>Connection successful!';
                } else {
                    statusDiv.className = 'text-xs p-2 rounded bg-red-50 border border-red-200 text-red-700';
                    statusDiv.innerHTML = '<span class="material-symbols-outlined text-sm mr-1">error</span>Connection failed: Invalid credentials';
                }
            }, 2000);
        }

        function selectAllObjects() {
            const checkboxes = document.querySelectorAll('#objectSelectionContent input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = true);
        }

        function deselectAllObjects() {
            const checkboxes = document.querySelectorAll('#objectSelectionContent input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
        }

        function previewObjects() {
            const previewResults = document.getElementById('previewResults');
            previewResults.classList.remove('hidden');

            // Simulate loading preview data
            setTimeout(() => {
                previewResults.innerHTML = `
                    <div class="bg-gray-50 border border-gray-200 rounded p-2">
                        <div class="text-xs font-medium text-gray-700 mb-2">Selected Objects:</div>
                        <div class="space-y-1">
                            <div class="flex items-center justify-between text-xs">
                                <span>Tables: 12</span>
                                <span>Views: 3</span>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <span>Relationships: 15</span>
                                <span>Indexes: 28</span>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">
                                <strong>Tables:</strong> Customers, Orders, Products, OrderDetails, Categories, Suppliers, Employees, Shippers, Territories, Region, CustomerCustomerDemo, CustomerDemographics
                            </div>
                        </div>
                    </div>
                `;
            }, 1000);
        }

        function generateDiagram() {
            // Show loading state
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="material-symbols-outlined text-base mr-2 animate-spin">refresh</span>Generating...';
            button.disabled = true;

            // Simulate diagram generation
            setTimeout(() => {
                alert('Diagram generated successfully! 12 tables and 15 relationships have been added to the canvas.');

                // Reset button
                button.innerHTML = originalText;
                button.disabled = false;

                // Exit reverse engineering mode
                toggleReverseEngineering();
            }, 3000);
        }

        function saveTemplate() {
            const templateName = prompt('Enter template name:', 'My Database Template');
            if (templateName) {
                alert(`Template "${templateName}" saved successfully!`);
            }
        }

        function cancelReverseEngineering() {
            if (confirm('Are you sure you want to cancel? All settings will be lost.')) {
                toggleReverseEngineering();
            }
        }

        // Complete Compare Functions
        let completeCompareMode = false;

        function toggleCompleteCompare() {
            completeCompareMode = !completeCompareMode;
            const canvasColumn = document.getElementById('canvasColumn');
            const propertiesPanel = document.getElementById('propertiesPanel');
            const modelExplorer = document.querySelector('.model-explorer');
            const diagramCanvas = document.getElementById('diagramCanvas');
            const diagramTabs = document.getElementById('diagramTabs');
            const compareCanvas = document.getElementById('completeCompareCanvas');
            const mainMenuCompare = document.getElementById('mainMenuCompare');
            const toolsCompleteCompare = document.getElementById('toolsCompleteCompare');

            if (completeCompareMode) {
                // Enter Complete Compare mode - use full canvas width
                canvasColumn.classList.remove('w-[55%]');
                canvasColumn.classList.add('w-[80%]');
                // Hide properties panel and disable model explorer
                propertiesPanel.classList.add('hidden');
                modelExplorer.classList.add('opacity-50', 'pointer-events-none');
                // Hide diagram canvas and tabs, show compare canvas
                diagramCanvas.classList.add('hidden');
                diagramTabs.classList.add('hidden');
                compareCanvas.classList.remove('hidden');
                // Update main menu button
                mainMenuCompare.classList.remove('text-gray-600', 'hover:text-indigo-600', 'hover:bg-gray-200');
                mainMenuCompare.classList.add('text-white', 'bg-indigo-600');
                mainMenuCompare.title = 'Exit Complete Compare';
                // Update tools ribbon button
                if (toolsCompleteCompare) {
                    toolsCompleteCompare.classList.add('bg-indigo-100');
                }
            } else {
                // Exit Complete Compare mode - restore normal layout
                canvasColumn.classList.remove('w-[80%]');
                canvasColumn.classList.add('w-[55%]');
                // Show properties panel and enable model explorer
                propertiesPanel.classList.remove('hidden');
                modelExplorer.classList.remove('opacity-50', 'pointer-events-none');
                // Show diagram canvas and tabs, hide compare canvas
                diagramCanvas.classList.remove('hidden');
                diagramTabs.classList.remove('hidden');
                compareCanvas.classList.add('hidden');
                // Update main menu button
                mainMenuCompare.classList.remove('text-white', 'bg-indigo-600');
                mainMenuCompare.classList.add('text-gray-600', 'hover:text-indigo-600', 'hover:bg-gray-200');
                mainMenuCompare.title = 'Complete Compare';
                // Update tools ribbon button
                if (toolsCompleteCompare) {
                    toolsCompleteCompare.classList.remove('bg-indigo-100');
                }
            }
        }

        function updateSourceOptions(sourceType) {
            const sourceDetails = document.querySelector('#sourceDetails');
            let html = '';

            switch(sourceType) {
                case 'local':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Select Model File</label>
                            <div class="flex">
                                <input type="file" accept=".edm,.xml,.json" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md text-sm">
                                <button class="px-4 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-sm hover:bg-gray-200">
                                    Browse
                                </button>
                            </div>
                        </div>`;
                    break;
                case 'repository':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Repository URL</label>
                            <input type="url" placeholder="https://repository.example.com/model.edm" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Authentication</label>
                            <input type="password" placeholder="Access token or credentials" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
                case 'cloud':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">GitHub Repository</label>
                            <input type="text" placeholder="username/repository" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Branch/Path</label>
                            <input type="text" placeholder="main/models/schema.edm" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
                case 'database':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Database Type</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <option value="">Select database...</option>
                                <option value="postgresql">PostgreSQL</option>
                                <option value="mysql">MySQL</option>
                                <option value="sqlserver">SQL Server</option>
                                <option value="oracle">Oracle</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Connection String</label>
                            <input type="text" placeholder="Server=localhost;Database=mydb;..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
            }

            if (sourceDetails) {
                sourceDetails.innerHTML = html;
            }
        }

        function updateTargetOptions(targetType) {
            // Similar implementation to updateSourceOptions but for target
            const targetDetails = document.querySelector('#targetDetails');
            let html = '';

            switch(targetType) {
                case 'local':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Select Model File</label>
                            <div class="flex">
                                <input type="file" accept=".edm,.xml,.json" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md text-sm">
                                <button class="px-4 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-sm hover:bg-gray-200">
                                    Browse
                                </button>
                            </div>
                        </div>`;
                    break;
                case 'repository':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Repository URL</label>
                            <input type="url" placeholder="https://repository.example.com/model.edm" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Authentication</label>
                            <input type="password" placeholder="Access token or credentials" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
                case 'cloud':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">GitHub Repository</label>
                            <input type="text" placeholder="username/repository" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Branch/Path</label>
                            <input type="text" placeholder="main/models/schema.edm" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
                case 'database':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Database Type</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <option value="">Select database...</option>
                                <option value="postgresql">PostgreSQL</option>
                                <option value="mysql">MySQL</option>
                                <option value="sqlserver">SQL Server</option>
                                <option value="oracle">Oracle</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Connection String</label>
                            <input type="text" placeholder="Server=localhost;Database=mydb;..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                        </div>`;
                    break;
            }

            if (targetDetails) {
                targetDetails.innerHTML = html;
            }
        }

        function swapSourceTarget() {
            // Get current source and target values and swap them
            const sourceTypeSelect = document.querySelector('#sourceTargetContent select:first-of-type');
            const targetTypeSelect = document.querySelector('#sourceTargetContent select:nth-of-type(2)');

            if (sourceTypeSelect && targetTypeSelect) {
                const tempValue = sourceTypeSelect.value;
                sourceTypeSelect.value = targetTypeSelect.value;
                targetTypeSelect.value = tempValue;

                // Update the options for both
                updateSourceOptions(sourceTypeSelect.value);
                updateTargetOptions(targetTypeSelect.value);
            }
        }

        function toggleCompareMenu() {
            const submenu = document.getElementById('compareSubmenu');
            submenu.classList.toggle('hidden');

            // Close submenu when clicking outside
            document.addEventListener('click', function closeSubmenu(e) {
                if (!e.target.closest('#compareMenuButton') && !e.target.closest('#compareSubmenu')) {
                    submenu.classList.add('hidden');
                    document.removeEventListener('click', closeSubmenu);
                }
            });
        }

        function quickCompare() {
            alert('Quick Compare functionality coming soon!');
            document.getElementById('compareSubmenu').classList.add('hidden');
        }

        function runComparison() {
            // Simulate comparison process
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="material-symbols-outlined text-base mr-2 animate-spin">refresh</span>Comparing...';
            button.disabled = true;

            setTimeout(() => {
                // Open comparison results section
                const resultsSection = document.getElementById('comparisonResultsContent');
                const resultsIcon = document.getElementById('comparisonResultsIcon');

                if (resultsSection && resultsIcon) {
                    resultsSection.classList.remove('hidden');
                    resultsIcon.textContent = 'expand_less';
                    resultsSection.scrollIntoView({ behavior: 'smooth' });
                }

                // Reset button
                button.innerHTML = originalText;
                button.disabled = false;

                // Show detailed results notification
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg z-50';
                notification.innerHTML = `
                    <div class="flex items-center">
                        <span class="material-symbols-outlined text-base mr-2">check_circle</span>
                        <div>
                            <strong>Comparison completed!</strong><br>
                            <span class="text-sm">Found 23 total differences: 12 added, 3 deleted, 8 modified</span>
                        </div>
                    </div>
                `;
                document.body.appendChild(notification);

                // Auto-remove notification after 5 seconds
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }, 3000);
        }

        function generateComparisonReport() {
            alert('Generating comparison report... This will be exported as PDF.');
        }

        function applyMerge() {
            if (confirm('Are you sure you want to apply the selected merge changes to the target model?')) {
                alert('Merge completed successfully! 8 changes have been applied to the target model.');
                toggleCompleteCompare();
            }
        }

        function cancelCompleteCompare() {
            if (confirm('Are you sure you want to cancel? All comparison settings will be lost.')) {
                toggleCompleteCompare();
            }
        }

        function selectAllCompareObjects() {
            const checkboxes = document.querySelectorAll('#compareScopeContent input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = true);
        }

        function deselectAllCompareObjects() {
            const checkboxes = document.querySelectorAll('#compareScopeContent input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
        }

        function saveCompareSettings() {
            const settingsName = prompt('Enter settings name:', 'My Compare Settings');
            if (settingsName) {
                alert(`Comparison settings "${settingsName}" saved successfully!`);
            }
        }

        function toggleObjectDetails(detailsId) {
            const element = document.getElementById(detailsId);
            if (element) {
                element.classList.toggle('hidden');
            }
        }

        // Complete Compare Functions
        function startCompleteCompare() {
            // Already in Compare mode - just ensure proper state
            enterCompareMode();
        }

        function enterCompareMode() {
            compareMode = true;
            currentCompareStep = 1;

            // Hide original diagram elements and show Compare interface
            const originalElements = document.getElementById('originalDiagramElements');
            const originalProperties = document.getElementById('originalPropertiesPanel');
            const compareInterface = document.getElementById('compareInterface');

            if (originalElements) originalElements.classList.add('hidden');
            if (originalProperties) originalProperties.classList.add('hidden');
            if (compareInterface) compareInterface.classList.remove('hidden');

            // Show step 1
            showCompareStep(1);
        }

        function exitCompareMode() {
            if (confirm('Exit Complete Compare mode? Return to normal modeler?')) {
                // Redirect to normal modeler
                window.location.href = 'modeler.html';
            }
        }

        function showCompareStep(step) {
            // Hide all steps
            for (let i = 1; i <= 3; i++) {
                const stepElement = document.getElementById(`compareStep${i}`);
                if (stepElement) {
                    stepElement.classList.add('hidden');
                }
            }

            // Show target step
            const targetStep = document.getElementById(`compareStep${step}`);
            if (targetStep) {
                targetStep.classList.remove('hidden');
            }

            currentCompareStep = step;
        }

        function goToStep(step) {
            showCompareStep(step);
        }

        function startComparison() {
            // Store model selections
            leftModel = {
                name: 'CustomerDB_v1.2.erwin',
                entities: 5,
                tables: 5,
                views: 3,
                indexes: 8
            };

            rightModel = {
                name: 'CustomerDB_v1.3.erwin',
                entities: 6,
                tables: 6,
                views: 5,
                indexes: 12
            };

            // Transition to comparison view
            showCompareStep(2);

            // Populate model trees with sample data
            populateModelTrees();
            populateConflictsList();
        }

        function populateModelTrees() {
            // Sample data based on the use case documentation
            const leftTreeData = [
                { name: 'Customer', type: 'entity', status: 'same', icon: '✅', description: '4 attributes, unchanged' },
                { name: 'Order', type: 'entity', status: 'different', icon: '⚠️', description: '5 → 6 attributes (added ShippingAddress)' },
                { name: 'OrderItem', type: 'entity', status: 'different', icon: '⚠️', description: '4 → 5 attributes (added ProductID FK)' },
                { name: 'TempOrder', type: 'entity', status: 'missing-right', icon: '❌', description: 'Removed in v1.3' },
                { name: 'CustomerOrders', type: 'view', status: 'same', icon: '✅', description: 'View unchanged' },
                { name: 'OrderSummary', type: 'view', status: 'different', icon: '⚠️', description: 'Enhanced with product details' },
                { name: 'IDX_Customer_LastName', type: 'index', status: 'same', icon: '✅', description: 'Index unchanged' },
                { name: 'IDX_Order_Date', type: 'index', status: 'different', icon: '⚠️', description: 'Single → Composite index' }
            ];

            const rightTreeData = [
                { name: 'Customer', type: 'entity', status: 'same', icon: '✅', description: '4 attributes, unchanged' },
                { name: 'Order', type: 'entity', status: 'different', icon: '⚠️', description: '6 attributes (added ShippingAddress)' },
                { name: 'OrderItem', type: 'entity', status: 'different', icon: '⚠️', description: '5 attributes (added ProductID FK)' },
                { name: 'Product', type: 'entity', status: 'missing-left', icon: '➕', description: 'New in v1.3' },
                { name: 'CustomerOrders', type: 'view', status: 'same', icon: '✅', description: 'View unchanged' },
                { name: 'OrderSummary', type: 'view', status: 'different', icon: '⚠️', description: 'Enhanced with product details' },
                { name: 'ProductCatalog', type: 'view', status: 'missing-left', icon: '➕', description: 'New view in v1.3' },
                { name: 'IDX_Customer_LastName', type: 'index', status: 'same', icon: '✅', description: 'Index unchanged' },
                { name: 'IDX_Order_Date', type: 'index', status: 'different', icon: '⚠️', description: 'Composite index (date, status)' },
                { name: 'IDX_Product_Category', type: 'index', status: 'missing-left', icon: '➕', description: 'New index for products' }
            ];

            populateTree('leftModelTree', leftTreeData);
            populateTree('rightModelTree', rightTreeData);
        }

        function populateTree(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = '';

            // Group data by type
            const entities = data.filter(item => item.type === 'entity');
            const views = data.filter(item => item.type === 'view');
            const indexes = data.filter(item => item.type === 'index');

            // Create grouped structure
            const groups = [
                { title: 'Entities', items: entities, icon: 'table_chart' },
                { title: 'Views', items: views, icon: 'view_module' },
                { title: 'Indexes', items: indexes, icon: 'sort' }
            ];

            groups.forEach(group => {
                if (group.items.length > 0) {
                    // Group header
                    const groupHeader = document.createElement('div');
                    groupHeader.className = 'font-medium text-xs text-gray-700 mb-2 px-2 py-1 bg-gray-100 rounded';
                    groupHeader.innerHTML = `
                        <span class="material-symbols-outlined text-sm mr-2">${group.icon}</span>
                        ${group.title} (${group.items.length})
                    `;
                    container.appendChild(groupHeader);

                    // Group items
                    group.items.forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = `p-2 border border-gray-200 rounded mb-2 cursor-pointer hover:bg-gray-50 status-${item.status}`;
                        itemDiv.onclick = () => selectComparisonObject(item);

                        const statusColors = {
                            'same': 'bg-green-50 border-green-200',
                            'different': 'bg-yellow-50 border-yellow-200',
                            'missing-left': 'bg-blue-50 border-blue-200',
                            'missing-right': 'bg-red-50 border-red-200'
                        };

                        itemDiv.className += ` ${statusColors[item.status] || ''}`;

                        itemDiv.innerHTML = `
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <span class="mr-2">${item.icon}</span>
                                    <span class="font-medium text-sm">${item.name}</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    ${getActionButtons(item)}
                                </div>
                            </div>
                            <div class="text-xs text-gray-600 mt-1 ml-6">${item.description}</div>
                        `;

                        container.appendChild(itemDiv);
                    });

                    // Add spacing between groups
                    if (group !== groups[groups.length - 1]) {
                        const spacer = document.createElement('div');
                        spacer.className = 'mb-4';
                        container.appendChild(spacer);
                    }
                }
            });
        }

        function getActionButtons(item) {
            switch(item.status) {
                case 'different':
                    return `
                        <button class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200" onclick="takeFromLeft('${item.name}'); event.stopPropagation();">Left</button>
                        <button class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200" onclick="takeFromRight('${item.name}'); event.stopPropagation();">Right</button>
                        <button class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200" onclick="mergeObject('${item.name}'); event.stopPropagation();">Merge</button>
                    `;
                case 'missing-left':
                    return `<button class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200" onclick="addMissing('${item.name}'); event.stopPropagation();">Add</button>`;
                case 'missing-right':
                    return `<button class="text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200" onclick="removeMissing('${item.name}'); event.stopPropagation();">Remove</button>`;
                default:
                    return '<span class="text-xs text-green-600">✓ Same</span>';
            }
        }

        function selectComparisonObject(item) {
            // Update object details panel
            const detailsContent = document.getElementById('objectDetailsContent');
            if (!detailsContent) return;

            detailsContent.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <h4 class="font-semibold text-lg">${item.name}</h4>
                        <span class="px-2 py-1 rounded text-xs bg-gray-100 text-gray-700">${item.type}</span>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <h5 class="font-medium text-sm text-blue-700 mb-2">Left Model (v1.2)</h5>
                            <div class="bg-blue-50 p-3 rounded border">
                                ${getObjectDetails(item, 'left')}
                            </div>
                        </div>
                        <div>
                            <h5 class="font-medium text-sm text-green-700 mb-2">Right Model (v1.3)</h5>
                            <div class="bg-green-50 p-3 rounded border">
                                ${getObjectDetails(item, 'right')}
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-center space-x-3 pt-4 border-t">
                        ${getActionButtons(item)}
                    </div>
                </div>
            `;
        }

        function getObjectDetails(item, side) {
            // Sample details based on object and side
            if (item.name === 'Order') {
                if (side === 'left') {
                    return `
                        <div class="text-sm space-y-1">
                            <div><strong>Columns:</strong> 5</div>
                            <div><strong>Fields:</strong> order_id, customer_id, order_date, total_amount, status</div>
                            <div><strong>Primary Key:</strong> order_id</div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="text-sm space-y-1">
                            <div><strong>Columns:</strong> 6</div>
                            <div><strong>Fields:</strong> order_id, customer_id, order_date, total_amount, status, <span class="text-green-600">shipping_address</span></div>
                            <div><strong>Primary Key:</strong> order_id</div>
                            <div class="text-green-600 text-xs mt-2">+ Added shipping_address field</div>
                        </div>
                    `;
                }
            } else if (item.name === 'Product') {
                if (side === 'left') {
                    return `<div class="text-sm text-gray-500">Object not present in left model</div>`;
                } else {
                    return `
                        <div class="text-sm space-y-1">
                            <div><strong>Columns:</strong> 5</div>
                            <div><strong>Fields:</strong> product_id, name, category, price, stock_quantity</div>
                            <div><strong>Primary Key:</strong> product_id</div>
                            <div class="text-green-600 text-xs mt-2">+ New table in v1.3</div>
                        </div>
                    `;
                }
            } else if (item.name === 'TempOrder') {
                if (side === 'left') {
                    return `
                        <div class="text-sm space-y-1">
                            <div><strong>Columns:</strong> 3</div>
                            <div><strong>Fields:</strong> temp_order_id, customer_id, order_date</div>
                            <div><strong>Primary Key:</strong> temp_order_id</div>
                        </div>
                    `;
                } else {
                    return `<div class="text-sm text-gray-500">Object removed in right model</div>`;
                }
            }

            return `<div class="text-sm text-gray-500">${item.description}</div>`;
        }

        // Action functions for comparison objects
        function takeFromLeft(objectName) {
            alert(`Taking ${objectName} definition from left model (v1.2)`);
        }

        function takeFromRight(objectName) {
            alert(`Taking ${objectName} definition from right model (v1.3)`);
        }

        function mergeObject(objectName) {
            alert(`Opening merge editor for ${objectName} to combine both definitions`);
        }

        function addMissing(objectName) {
            alert(`Adding missing object ${objectName} to merge model`);
        }

        function removeMissing(objectName) {
            alert(`Removing object ${objectName} from merge model`);
        }

        function filterComparison(filter) {
            // Update filter buttons
            document.querySelectorAll('[onclick^="filterComparison"]').forEach(btn => {
                btn.className = 'px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300';
            });
            event.target.className = 'px-3 py-1 bg-blue-600 text-white rounded text-sm';

            // Filter logic would go here
            console.log(`Filtering comparison by: ${filter}`);
        }

        function exportComparisonReport() {
            alert('Exporting comparison report as PDF...');
        }

        function togglePropertiesPanel() {
            const panel = document.getElementById('comparisonPropertiesPanel');
            const icon = event.target;

            if (panel.classList.contains('h-64')) {
                panel.classList.remove('h-64');
                panel.classList.add('h-12');
                icon.style.transform = 'rotate(180deg)';
            } else {
                panel.classList.remove('h-12');
                panel.classList.add('h-64');
                icon.style.transform = 'rotate(0deg)';
            }
        }

        function populateConflictsList() {
            const conflictsList = document.getElementById('conflictsList');
            if (!conflictsList) return;

            const conflicts = [
                {
                    id: 1,
                    object: 'Order',
                    type: 'Entity',
                    issue: 'Column added: shipping_address',
                    severity: 'medium',
                    resolution: null
                },
                {
                    id: 2,
                    object: 'OrderItem',
                    type: 'Entity',
                    issue: 'Foreign key added: ProductID',
                    severity: 'high',
                    resolution: null
                },
                {
                    id: 3,
                    object: 'Product',
                    type: 'Entity',
                    issue: 'New table in right model',
                    severity: 'medium',
                    resolution: 'add'
                },
                {
                    id: 4,
                    object: 'TempOrder',
                    type: 'Entity',
                    issue: 'Table removed in right model',
                    severity: 'low',
                    resolution: 'remove'
                }
            ];

            conflictsList.innerHTML = conflicts.map(conflict => `
                <div class="bg-white border border-gray-200 rounded-lg p-4 ${conflict.resolution ? 'opacity-75' : ''}">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-sm mr-2">table_chart</span>
                            <span class="font-medium">${conflict.object}</span>
                            <span class="ml-2 px-2 py-1 rounded text-xs bg-gray-100 text-gray-700">${conflict.type}</span>
                            <span class="ml-2 px-2 py-1 rounded text-xs ${
                                conflict.severity === 'high' ? 'bg-red-100 text-red-700' :
                                conflict.severity === 'medium' ? 'bg-yellow-100 text-yellow-700' :
                                'bg-blue-100 text-blue-700'
                            }">${conflict.severity}</span>
                        </div>
                        ${conflict.resolution ?
                            `<span class="text-xs text-green-600">✓ Resolved</span>` :
                            `<div class="flex space-x-2">
                                <button onclick="resolveConflict(${conflict.id}, 'left')" class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200">Use Left</button>
                                <button onclick="resolveConflict(${conflict.id}, 'right')" class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200">Use Right</button>
                                <button onclick="resolveConflict(${conflict.id}, 'merge')" class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200">Merge</button>
                            </div>`
                        }
                    </div>
                    <div class="text-sm text-gray-600">${conflict.issue}</div>
                </div>
            `).join('');
        }

        function resolveConflict(conflictId, action) {
            alert(`Resolving conflict ${conflictId} with action: ${action}`);
            // Update the conflict as resolved
            populateConflictsList();
        }

        function autoResolveConflicts() {
            alert('Auto-resolving compatible conflicts...');
            populateConflictsList();
        }

        function generateMergeModel() {
            alert('Generating merge model with resolved conflicts...');
        }

        function toggleCompleteCompare() {
            // This file is dedicated to Complete Compare mode
            // Simply ensure we're in the correct state
            enterCompareMode();
        }

        // Initialize Compare Mode on page load
        document.addEventListener('DOMContentLoaded', function() {
            enterCompareMode();
        });

        console.log('Erwin Cloud DM - Complete Compare Mode loaded successfully!');
        console.log('Features: Docked toolbar, contextual toolbar, keyboard shortcuts, tooltips, reverse engineering, complete compare');
    </script>
</body>
</html>